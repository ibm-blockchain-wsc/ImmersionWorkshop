
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../images/ibm_blockchain_platform.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>Loopback - Blockchain Immersion Workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab28b872.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
      
        <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Blockchain Immersion Workshop" class="md-header-nav__button md-logo" aria-label="Blockchain Immersion Workshop">
      
  <img src="../images/ibm_blockchain_platform.ico" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Blockchain Immersion Workshop
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Loopback
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ibm-blockchain-wsc/ImmersionWorkshop.git" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Blockchain Immersion Workshop" class="md-nav__button md-logo" aria-label="Blockchain Immersion Workshop">
      
  <img src="../images/ibm_blockchain_platform.ico" alt="logo">

    </a>
    Blockchain Immersion Workshop
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ibm-blockchain-wsc/ImmersionWorkshop.git" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Choose your own lab
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Choose your own lab" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Choose your own lab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-intro/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../assignment/" class="md-nav__link">
      Skytap image assignments
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Build your first network on Linux on IBM Z Lab
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Build your first network on Linux on IBM Z Lab" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Build your first network on Linux on IBM Z Lab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../console-urls/" class="md-nav__link">
      IBM Blockchain Platform Console URL assignments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ibpconsole/" class="md-nav__link">
      Part 1 - Create a Blockchain Network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ibpdeploy/" class="md-nav__link">
      Part 2 - Deploy a Smart Contract
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../references/" class="md-nav__link">
      Additional Resources
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Loopback</h1>
                
                <p>In this section, we are going to create a loopback API application for MagnetoCorp and another loopback API application for Digibank. Once we have created these applications, you'll be able to submit transactions and have them be recorded in our blockchain network. </p>
<p><strong>1.</strong> From the terminal application, open a new tab and navigate to your desktop. Once you are at the desktop, install the loopback npm package. You can find these commands below:</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop$ cd ~</span>
<span class="err">tecadmin@ubuntubase:~/Desktop$ npm install -g @loopback/cli</span>
</code></pre></div>

<p><strong>2.</strong> Once you have the loopback installed, go ahead and follow the series of commands and prompts below. I'll explain these after we have completed this (when you get the <em>Select features to enable in the project</em> prompt, just hit <strong>Enter</strong>):</p>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">Our</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>
<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">app</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">magnetocorp</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="nl">description</span><span class="p">:</span><span class="w"> </span><span class="n">loopback</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">magnetocorp</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="nl">directory</span><span class="p">:</span><span class="w"> </span><span class="n">magnetocorp</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">MagnetocorpApplication</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="o">&lt;</span><span class="nf">space</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">select</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="ow">all</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">invert</span><span class="w"> </span><span class="n">selection</span><span class="p">)</span><span class="n">Enable</span><span class="w"> </span><span class="n">eslint</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">prettier</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">mocha</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">loopbackBuild</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">vscode</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">docker</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">repositories</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">services</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">eslintignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">eslintrc</span><span class="p">.</span><span class="n">js</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">mocharc</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">npmrc</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">prettierignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">prettierrc</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">DEVELOPING</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">package</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">tsconfig</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">vscode</span><span class="o">/</span><span class="n">settings</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">vscode</span><span class="o">/</span><span class="n">tasks</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">gitignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">dockerignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">Dockerfile</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="p">.</span><span class="n">js</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="k">public</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">html</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">application</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">migrate</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="k">sequence</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">ping</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">acceptance</span><span class="o">/</span><span class="n">home</span><span class="o">-</span><span class="n">page</span><span class="p">.</span><span class="n">acceptance</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">acceptance</span><span class="o">/</span><span class="n">ping</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">acceptance</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">acceptance</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">helper</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>


<span class="n">Application</span><span class="w"> </span><span class="n">magnetocorp</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">magnetocorp</span><span class="p">.</span><span class="w"></span>

<span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="err">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">magnetocorp</span><span class="o">/</span><span class="w"></span>
<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">model</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">issue</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Allow</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="p">(</span><span class="k">free</span><span class="o">-</span><span class="n">form</span><span class="p">)</span><span class="w"> </span><span class="n">properties</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="n">Let</span><span class="s1">&#39;s add a property to Issue</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: issuer</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is issuer the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Issue</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: issueDateTime</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is issueDateTime the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">maturityDateTime</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">maturityDateTime</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Issue</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: faceValue</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is faceValue the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">paperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">paperRate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Issue</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: </span>
<span class="s1">   create src/models/issue.model.ts</span>
<span class="s1">   update src/models/index.ts</span>

<span class="s1">Model issue was created in src/models/</span>

<span class="s1">----- Create Model for our getPaperRate -----</span>

<span class="s1">tecadmin@ubuntubase:~/Desktop/magnetocorp$ lb4 model</span>
<span class="s1">? Model class name: getPaperRate</span>
<span class="s1">? Please select the model base class Entity (A persisted model with an ID)</span>
<span class="s1">? Allow additional (free-form) properties? No</span>
<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">issuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to GetPaperRate</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: paperNumber</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is paperNumber the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rate</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Model</span><span class="w"> </span><span class="n">getPaperRate</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="w"></span>

<span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">getAllPapersFromIssuer</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">model</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">getAllPapersFromIssuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Allow</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="p">(</span><span class="k">free</span><span class="o">-</span><span class="n">form</span><span class="p">)</span><span class="w"> </span><span class="n">properties</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="n">Let</span><span class="s1">&#39;s add a property to GetAllPapersFromIssuer</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: paperIssuer</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is paperIssuer the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuer</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Model</span><span class="w"> </span><span class="n">getAllPapersFromIssuer</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="w"></span>

<span class="w">    </span><span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Datasource</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">datasource</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Datasource</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">db</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">connector</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">db</span><span class="p">:</span><span class="w"> </span><span class="ow">In</span><span class="o">-</span><span class="n">memory</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="p">(</span><span class="n">supported</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">StrongLoop</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">window</span><span class="p">.</span><span class="n">localStorage</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">persistence</span><span class="w"> </span><span class="p">(</span><span class="n">browser</span><span class="w"> </span><span class="k">only</span><span class="p">)</span><span class="err">:</span><span class="w"> </span>
<span class="vm">?</span><span class="w"> </span><span class="k">Full</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">persistence</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="w"> </span><span class="k">only</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">datasource</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">datasource</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Datasource</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="w"></span>

<span class="w">    </span><span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">Repositories</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">repository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">datasource</span><span class="w"> </span><span class="n">DbDatasource</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="o">&lt;</span><span class="nf">space</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">select</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="ow">all</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">invert</span><span class="w"> </span><span class="n">selection</span><span class="p">)</span><span class="n">GetAllPapersFromIssuer</span><span class="p">,</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="p">,</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">DefaultCrudRepository</span><span class="w"> </span><span class="p">(</span><span class="n">Legacy</span><span class="w"> </span><span class="n">juggler</span><span class="w"> </span><span class="n">bridge</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">GetAllPapersFromIssuer</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">GetPaperRate</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">Issue</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuer</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rate</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">issue</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Repositories</span><span class="w"> </span><span class="n">GetAllPapersFromIssuerRepository</span><span class="p">,</span><span class="n">GetPaperRateRepository</span><span class="p">,</span><span class="n">IssueRepository</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="w"></span>

<span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Issue</span><span class="p">,</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">IssueRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="n">issues</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">issue</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetPaperRateRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rates</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rate</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetAllPapersFromIssuerRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuers</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuer</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>
</code></pre></div>

<p>What you just did above is basically create the bones to our loopback API application. We needed to create our app, model, datasource, repository and controller to actually create our application. Below is a breakdown of each thing we created. </p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not repeat the commands shown in the rest of this section as they are snippets of what you just entered above and they are repeated here for illustrative purposes</p>
</div>
<p><strong>App:</strong></p>
<p>The LoopBack 4 CLI toolkit comes with templates that generate whole applications, as well as artifacts (for example, controllers, models, and repositories) for existing applications.</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop$ lb4 app</span>
<span class="err">? Project name: magnetocorp</span>
<span class="err">? Project description: loopback application for magnetocorp</span>
<span class="err">? Project root directory: magnetocorp</span>
<span class="err">? Application class name: MagnetoCorpApplication</span>
<span class="err">? Select features to enable in the project (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)Enable eslint, Enable --- Press enter to enable all of these! ---</span>
<span class="err">prettier, Enable mocha, Enable loopbackBuild, Enable vscode, Enable docker, Enable repositories, Enable services</span>
</code></pre></div>

<p><strong>Model:</strong></p>
<p>Now we can begin working on the representation of our data for use with LoopBack 4, which needs to align with what is in our smart conract. To that end, were going to create an issue and buy model that can represent instances of a task for our papercontract. A model describes business domain objects and defines a list of properties with name, type, and other constraints. Models are used for data exchange on the wire or between different systems. </p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">model</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">getPaperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Allow</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="p">(</span><span class="k">free</span><span class="o">-</span><span class="n">form</span><span class="p">)</span><span class="w"> </span><span class="n">properties</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="n">Let</span><span class="s1">&#39;s add a property to GetPaperRate</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: issuer</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is issuer the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rate</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Model</span><span class="w"> </span><span class="n">getPaperRate</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="w"></span>
</code></pre></div>

<p><strong>Datasource:</strong></p>
<p>Datasources are LoopBacks way of connecting to various sources of data, such as databases, APIs, message queues and more. In LoopBack 4, datasources can be represented as strongly-typed objects and freely made available for injection throughout the application. Typically, in LoopBack 4, datasources are used in conjunction with Repositories to provide access to data.</p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">datasource</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Datasource</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">db</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">connector</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">db</span><span class="p">:</span><span class="w"> </span><span class="ow">In</span><span class="o">-</span><span class="n">memory</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="p">(</span><span class="n">supported</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">StrongLoop</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">window</span><span class="p">.</span><span class="n">localStorage</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">persistence</span><span class="w"> </span><span class="p">(</span><span class="n">browser</span><span class="w"> </span><span class="k">only</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Full</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">persistence</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="w"> </span><span class="k">only</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">datasource</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">datasource</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Datasource</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="w"></span>
</code></pre></div>

<p><strong>Repositories:</strong></p>
<p>A Repository represents a specialized Service interface that provides strong-typed data access (for example, CRUD) operations of a domain model against the underlying database or service.</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop/magnetocorp$ lb4 repository</span>
<span class="err">? Please select the datasource DbDatasource</span>
<span class="err">? Select the model(s) you want to generate a repository (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)GetAllPapersFromIssuer, GetPaperRate, Issue</span>
<span class="err">? Please select the repository base class DefaultCrudRepository (Legacy juggler bridge)</span>
<span class="err">? Please enter the name of the ID property for GetAllPapersFromIssuer: id</span>
<span class="err">? Please enter the name of the ID property for GetPaperRate: id</span>
<span class="err">? Please enter the name of the ID property for Issue: id</span>
<span class="err">   create src/repositories/get-all-papers-from-issuer.repository.ts</span>
<span class="err">   create src/repositories/get-paper-rate.repository.ts</span>
<span class="err">   create src/repositories/issue.repository.ts</span>
<span class="err">   update src/repositories/index.ts</span>
<span class="err">   update src/repositories/index.ts</span>
<span class="err">   update src/repositories/index.ts</span>
</code></pre></div>

<p><strong>Controller:</strong></p>
<p>In LoopBack 4, controllers handle the request-response lifecycle for your API. Each function on a controller can be addressed individually to handle an incoming request (like a POST request to /todos), to perform business logic, and to return a response.</p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">Issue</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">IssueRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="n">issues</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">issue</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>
</code></pre></div>

<p>You can find out more information and great tutorials as to how to build your own loopback API application here: <a href="https://loopback.io/doc/en/lb4/index.html">https://loopback.io/doc/en/lb4/index.html</a></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Okay, now resume entering or performing any commands or tasks you see.</p>
</div>
<p><strong>3.</strong> Within VSCode, go to the <code>Explorer Perspective</code> and do <code>File -&gt; Add Folder to Workplace</code> and navigate to the <code>magnetocorp</code> folder that we just created within the <code>Desktop</code> folder. Go ahead and open that folder in VSCode.</p>
<p><strong>4.</strong> Now within VSCode, right click on <code>magnetocorp</code> - the folder you just opened in VSCode. Once you right click, select <code>New Folder</code> and name it <code>data</code>. Really mysterious right? </p>
<p><strong>5.</strong> On the newly created folder, <code>data</code>, right click on that folder and select <code>New File</code> and name that file <code>db.json</code>. Within that new file, add in this text below
::</p>
<div class="codehilite"><pre><span></span><code><span class="err">{</span>
<span class="err">  &quot;ids&quot;: {</span>
<span class="err">    &quot;Todo&quot;: 5</span>
<span class="err">  },</span>
<span class="err">  &quot;models&quot;: {</span>
<span class="err">    &quot;Todo&quot;: {</span>
<span class="err">      &quot;1&quot;: &quot;{\&quot;title\&quot;:\&quot;Take over the galaxy\&quot;,\&quot;desc\&quot;:\&quot;MWAHAHAHAHAHAHAHAHAHAHAHAHAMWAHAHAHAHAHAHAHAHAHAHAHAHA\&quot;,\&quot;id\&quot;:1}&quot;,</span>
<span class="err">      &quot;2&quot;: &quot;{\&quot;title\&quot;:\&quot;destroy alderaan\&quot;,\&quot;desc\&quot;:\&quot;Make sure there are no survivors left!\&quot;,\&quot;id\&quot;:2}&quot;,</span>
<span class="err">      &quot;3&quot;: &quot;{\&quot;title\&quot;:\&quot;terrorize senate\&quot;,\&quot;desc\&quot;:\&quot;Tell them they&#39;re getting a budget cut.\&quot;,\&quot;id\&quot;:3}&quot;,</span>
<span class="err">      &quot;4&quot;: &quot;{\&quot;title\&quot;:\&quot;crush rebel scum\&quot;,\&quot;desc\&quot;:\&quot;Every.Last.One.\&quot;,\&quot;id\&quot;:4}&quot;</span>
<span class="err">    }</span>
<span class="err">  }</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong> This file, db.json, contains an example database.</p>
<p><strong>6.</strong> Within the <code>magnetocorp</code> folder in VSCode, navigate to the following folder
::</p>
<div class="codehilite"><pre><span></span><code><span class="err">magnetocorp -&gt; src -&gt; repositories</span>
</code></pre></div>

<p>You should see 5 files in there: <code>README.md</code>, <code>issue.repository.ts</code>, <code>get-paper-rate.repository.ts</code>, <code>get-all-papers-from-issuer.repository.ts</code>, and <code>index.ts</code></p>
<p><strong>7.</strong> Within the <code>issue.repository.ts</code> file, add <code>//</code> on line 8. Look below as to what to do
::</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">Issue</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">Issue</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>8.</strong> Do the same thing for <code>get-paper-rate.repository.ts</code> on line 8
::</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">GetPaperRate</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">GetPaperRate</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>9.</strong> Do the same thing for <code>get-all-papers-from-issuer.repository.ts</code> on line 8
::</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">GetAllPapersFromIssuer</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">GetAllPapersFromIssuer</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>10.</strong> Within the <code>magnetocorp</code> folder in VSCode, navigate to the following folder
::</p>
<div class="codehilite"><pre><span></span><code><span class="err">magnetocorp -&gt; src -&gt; controllers</span>
</code></pre></div>

<p>You should see 6 files in there: <code>README.md</code>, <code>issue.controller.ts</code>, <code>get-paper-rate.controller.ts</code>, <code>get-all-papers-from-issuer.controller.ts</code>, <code>ping.controller.ts</code>, and <code>index.ts</code></p>
<p><strong>11.</strong> Within the <code>issue.controller.ts</code> file, delete all of its contents and paste in what is below
::</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span> <span class="n">Copyright</span> <span class="n">IBM</span> <span class="n">Corp</span><span class="o">.</span> <span class="mi">2017</span><span class="p">,</span><span class="mf">2018.</span> <span class="n">All</span> <span class="n">Rights</span> <span class="n">Reserved</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Node</span> <span class="n">module</span><span class="p">:</span> <span class="nd">@loopback</span><span class="o">/</span><span class="n">example</span><span class="o">-</span><span class="n">todo</span>
<span class="o">//</span> <span class="n">This</span> <span class="nb">file</span> <span class="ow">is</span> <span class="n">licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">MIT</span> <span class="n">License</span><span class="o">.</span>
<span class="o">//</span> <span class="n">License</span> <span class="n">text</span> <span class="n">available</span> <span class="n">at</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">opensource</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">MIT</span>

<span class="kn">import</span> <span class="p">{</span>
  <span class="k">del</span><span class="p">,</span>
  <span class="n">get</span><span class="p">,</span>
  <span class="n">getFilterSchemaFor</span><span class="p">,</span>
  <span class="n">param</span><span class="p">,</span>
  <span class="n">patch</span><span class="p">,</span>
  <span class="n">post</span><span class="p">,</span>
  <span class="n">put</span><span class="p">,</span>
  <span class="n">requestBody</span><span class="p">,</span>
<span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Issue</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../models&#39;</span><span class="p">;</span>

<span class="kn">import</span> <span class="p">{</span> <span class="n">BlockChainModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../blockchainClient&#39;</span><span class="p">;</span>

<span class="n">let</span> <span class="n">blockchainClient</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BlockChainModule</span><span class="o">.</span><span class="n">BlockchainClient</span><span class="p">();</span>

<span class="n">export</span> <span class="k">class</span> <span class="nc">IssueController</span> <span class="p">{</span>
  <span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nd">@post</span><span class="p">(</span><span class="s1">&#39;/issue&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">responses</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;200&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">description</span><span class="p">:</span> <span class="s1">&#39;Todo model instance&#39;</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;application/json&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="n">schema</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;x-ts-type&#39;</span><span class="p">:</span> <span class="n">Issue</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">})</span>
 <span class="n">async</span> <span class="n">createIssue</span><span class="p">(</span><span class="nd">@requestBody</span><span class="p">()</span> <span class="n">requestBody</span><span class="p">:</span> <span class="n">Issue</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">Issue</span><span class="o">&gt;</span> <span class="p">{</span>
   <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Buy, requestBody: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">requestBody</span><span class="p">)</span>


    <span class="n">let</span> <span class="n">networkObj</span> <span class="o">=</span> <span class="n">await</span> <span class="n">blockchainClient</span><span class="o">.</span><span class="n">connectToNetwork</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">networkObj</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">let</span> <span class="n">errString</span> <span class="o">=</span> <span class="s1">&#39;Error connecting to network&#39;</span><span class="p">;</span>
      <span class="n">let</span> <span class="n">issue</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Issue</span><span class="p">({</span> <span class="n">issuer</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">paperNumber</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">issueDateTime</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">maturityDateTime</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">faceValue</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">paperRate</span><span class="p">:</span> <span class="n">errString</span> <span class="p">});</span>
      <span class="k">return</span> <span class="n">issue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;newtork obj: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">networkObj</span><span class="p">)</span>

    <span class="n">let</span> <span class="n">dataForIssue</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">function</span><span class="p">:</span> <span class="s1">&#39;issue&#39;</span><span class="p">,</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span>
      <span class="n">paperNumber</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span>
      <span class="n">issueDateTime</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">issueDateTime</span><span class="p">,</span>
      <span class="n">maturityDateTime</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">maturityDateTime</span><span class="p">,</span>
      <span class="n">faceValue</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">faceValue</span><span class="p">,</span>
      <span class="n">paperRate</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">paperRate</span><span class="p">,</span>
      <span class="n">contract</span><span class="p">:</span> <span class="n">networkObj</span><span class="o">.</span><span class="n">contract</span>
    <span class="p">};</span>

    <span class="n">var</span> <span class="n">resultAsBuffer</span> <span class="o">=</span> <span class="n">await</span> <span class="n">blockchainClient</span><span class="o">.</span><span class="n">issue</span><span class="p">(</span><span class="n">dataForIssue</span><span class="p">);</span>

    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;result from blockchainClient.submitTransaction in controller: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;result from blockchainClient.submitTransaction in controller: &#39;</span><span class="p">)</span>
    <span class="n">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">resultAsBuffer</span><span class="p">))</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>
    <span class="n">let</span> <span class="n">issue</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Issue</span><span class="p">({</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">paperNumber</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">issueDateTime</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">issueDateTime</span><span class="p">,</span>
      <span class="n">maturityDateTime</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">maturityDateTime</span><span class="p">,</span> <span class="n">faceValue</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">faceValue</span><span class="p">,</span> <span class="n">paperRate</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">paperRate</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="n">issue</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p>Below is a breakdown of this file above:</p>
<p>Below, we are pulling in the <code>issue</code> model that we created when we created our loopback API application:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="p">{</span> <span class="n">Issue</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../models&#39;</span><span class="p">;</span>
</code></pre></div>

<p>Below, we are only specifying a <code>post</code> API call. A post call adds data, in this case a transaction against our blockchain network, to our ledgers:</p>
<div class="codehilite"><pre><span></span><code><span class="err">@post(&#39;/issue&#39;, {</span>
<span class="err">    responses: {</span>
<span class="err">      &#39;200&#39;: {</span>
</code></pre></div>

<p>Below, we are actually submitting a transaction, an <code>issue</code> transaction. This transaction is looking for all the data fields we created in our <code>issue</code> model file. If all goes well, we will successfully <code>issue</code> a commercialpaper: </p>
<div class="codehilite"><pre><span></span><code><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="n">createIssue</span><span class="p">(</span><span class="nv">@requestBody</span><span class="p">()</span><span class="w"> </span><span class="nl">requestBody</span><span class="p">:</span><span class="w"> </span><span class="n">Issue</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Promise</span><span class="o">&lt;</span><span class="n">Issue</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">   </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s1">&#39;Buy, requestBody: &#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">requestBody</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">networkObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">blockchainClient</span><span class="p">.</span><span class="n">connectToNetwork</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="n">networkObj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">     </span><span class="n">let</span><span class="w"> </span><span class="n">errString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Error connecting to network&#39;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">let</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Issue</span><span class="p">(</span><span class="err">{</span><span class="w"> </span><span class="nl">issuer</span><span class="p">:</span><span class="w"> </span><span class="n">errString</span><span class="p">,</span><span class="w"> </span><span class="nl">paperNumber</span><span class="p">:</span><span class="w"> </span><span class="n">errString</span><span class="p">,</span><span class="w"> </span><span class="nl">issueDateTime</span><span class="p">:</span><span class="w"> </span><span class="n">errString</span><span class="p">,</span><span class="w"> </span><span class="nl">maturityDateTime</span><span class="p">:</span><span class="w"> </span><span class="n">errString</span><span class="p">,</span><span class="w"> </span><span class="nl">faceValue</span><span class="p">:</span><span class="w"> </span><span class="n">errString</span><span class="p">,</span><span class="w"> </span><span class="nl">paperRate</span><span class="p">:</span><span class="w"> </span><span class="n">errString</span><span class="w"> </span><span class="err">}</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">issue</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
</code></pre></div>

<p><strong>12.</strong> Within VSCode, right click on the <code>src</code> folder (within the <code>magnetocorp</code> folder) and select <code>New File</code>. Go ahead and name this file <code>blockchainClient.ts</code></p>
<p><strong>13.</strong> Within our new <code>blockchainClient.ts</code> file, paste in this code below:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="p">{</span> <span class="n">json</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;body-parser&quot;</span><span class="p">;</span>

<span class="n">const</span> <span class="n">yaml</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;js-yaml&#39;</span><span class="p">);</span>
<span class="n">const</span> <span class="p">{</span> <span class="n">FileSystemWallet</span><span class="p">,</span> <span class="n">Gateway</span> <span class="p">}</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;fabric-network&#39;</span><span class="p">);</span>
<span class="n">const</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">A</span> <span class="n">wallet</span> <span class="n">stores</span> <span class="n">a</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">identities</span> <span class="k">for</span> <span class="n">use</span>
<span class="n">const</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileSystemWallet</span><span class="p">(</span><span class="s1">&#39;/home/tecadmin/.fabric-vscode/local_fabric_wallet&#39;</span><span class="p">);</span>


<span class="n">export</span> <span class="n">module</span> <span class="n">BlockChainModule</span> <span class="p">{</span>

  <span class="n">export</span> <span class="k">class</span> <span class="nc">BlockchainClient</span> <span class="p">{</span>
   <span class="n">async</span> <span class="n">connectToNetwork</span><span class="p">()</span> <span class="p">{</span>

      <span class="n">const</span> <span class="n">gateway</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Gateway</span><span class="p">();</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;connecting to Fabric network...&#39;</span><span class="p">)</span>


        <span class="n">const</span> <span class="n">identityLabel</span> <span class="o">=</span> <span class="s1">&#39;isabella&#39;</span><span class="p">;</span>
       <span class="n">let</span> <span class="n">connectionProfile</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safeLoad</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">&#39;/home/tecadmin/Desktop/magnetocorp/networkConnection.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">));</span>

       <span class="n">let</span> <span class="n">connectionOptions</span> <span class="o">=</span> <span class="p">{</span>
         <span class="n">identity</span><span class="p">:</span> <span class="n">identityLabel</span><span class="p">,</span>
         <span class="n">wallet</span><span class="p">:</span> <span class="n">wallet</span><span class="p">,</span>
         <span class="n">discovery</span><span class="p">:</span> <span class="p">{</span>
           <span class="n">asLocalhost</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
           <span class="n">enabled</span><span class="p">:</span> <span class="n">true</span>
         <span class="p">}</span>
       <span class="p">};</span>

      <span class="o">//</span> <span class="n">Connect</span> <span class="n">to</span> <span class="n">gateway</span> <span class="n">using</span> <span class="n">network</span><span class="o">.</span><span class="n">yaml</span> <span class="nb">file</span> <span class="ow">and</span> <span class="n">our</span> <span class="n">certificates</span> <span class="ow">in</span> <span class="n">_idwallet</span> <span class="n">directory</span>
      <span class="n">await</span> <span class="n">gateway</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">connectionProfile</span><span class="p">,</span> <span class="n">connectionOptions</span><span class="p">);</span>

    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Connected to Fabric gateway.&#39;</span><span class="p">);</span>

    <span class="o">//</span> <span class="n">Connect</span> <span class="n">to</span> <span class="n">our</span> <span class="n">local</span> <span class="n">fabric</span>
    <span class="n">const</span> <span class="n">network</span> <span class="o">=</span> <span class="n">await</span> <span class="n">gateway</span><span class="o">.</span><span class="n">getNetwork</span><span class="p">(</span><span class="s1">&#39;mychannel&#39;</span><span class="p">);</span>

    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Connected to mychannel. &#39;</span><span class="p">);</span>

    <span class="o">//</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">we</span> <span class="n">have</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span>
    <span class="n">const</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">await</span> <span class="n">network</span><span class="o">.</span><span class="n">getContract</span><span class="p">(</span><span class="s1">&#39;papercontract&#39;</span><span class="p">);</span>


    <span class="n">let</span> <span class="n">networkObj</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">contract</span><span class="p">:</span> <span class="n">contract</span><span class="p">,</span>
      <span class="n">network</span><span class="p">:</span> <span class="n">network</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="n">networkObj</span><span class="p">;</span>

  <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sb">`Error processing transaction. ${error}`</span><span class="p">);</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">stack</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Done connecting to network.&#39;</span><span class="p">);</span>
    <span class="o">//</span> <span class="n">gateway</span><span class="o">.</span><span class="n">disconnect</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">}</span>




   <span class="n">async</span> <span class="n">issue</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="p">{</span>

     <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;args for issue: &#39;</span><span class="p">)</span>
     <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

     <span class="n">let</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">args</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">submitTransaction</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
       <span class="n">args</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">issueDateTime</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">maturityDateTime</span><span class="p">,</span>
       <span class="n">args</span><span class="o">.</span><span class="n">faceValue</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">paperRate</span>
     <span class="p">);</span>

     <span class="k">return</span> <span class="n">response</span><span class="p">;</span>

   <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong> Below is a breakdown of our <code>blockchainClient.ts</code> file:</p>
<p>Below, you'll see that we are specifying where our user's credientials are located to validate that our user can actually submit a transaction:</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span> <span class="n">A</span> <span class="n">wallet</span> <span class="n">stores</span> <span class="n">a</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">identities</span> <span class="k">for</span> <span class="n">use</span>
<span class="k">const</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileSystemWallet</span><span class="p">(</span><span class="s1">&#39;/home/tecadmin/Desktop/magnetocorp/local_fabric_wallet&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Below, we are saying that within the <code>.fabric-vscode/local_fabric_wallet</code> folder we are using <code>User1@org1.example.com</code> as our user. Also, we are saying that our connection profile is <code>networkConnection.yaml</code> located one directory back. We will copy the connection profile in the next section:</p>
<div class="codehilite"><pre><span></span><code><span class="k">const</span> <span class="n">identityLabel</span> <span class="o">=</span> <span class="s1">&#39;isabella&#39;</span><span class="p">;</span>
<span class="n">let</span> <span class="n">connectionProfile</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safeLoad</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">&#39;/home/tecadmin/Desktop/magnetocorp/networkConnection.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">));</span>
</code></pre></div>

<p>Below, we are connecting to our channel, called <code>mychannel</code>, and also using our smart contract, called <code>papercontract</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span> <span class="n">Connect</span> <span class="n">to</span> <span class="n">our</span> <span class="n">local</span> <span class="n">fabric</span>
<span class="k">const</span> <span class="n">network</span> <span class="o">=</span> <span class="n">await</span> <span class="n">gateway</span><span class="o">.</span><span class="n">getNetwork</span><span class="p">(</span><span class="s1">&#39;mychannel&#39;</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Connected to mychannel. &#39;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">we</span> <span class="n">have</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span>
<span class="k">const</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">await</span> <span class="n">network</span><span class="o">.</span><span class="n">getContract</span><span class="p">(</span><span class="s1">&#39;papercontract&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Below, we are actually submitting our <code>issue</code> transaction. There is a very similar transaction. This will use our <code>issue</code> controller as a basis for our actual arguments (args): </p>
<div class="codehilite"><pre><span></span><code>   <span class="n">async</span> <span class="n">issue</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="k">any</span><span class="p">)</span> <span class="err">{</span>

     <span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;args for issue: &#39;</span><span class="p">)</span>
     <span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

     <span class="n">let</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">args</span><span class="p">.</span><span class="n">contract</span><span class="p">.</span><span class="n">submitTransaction</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="k">function</span><span class="p">,</span>
       <span class="n">args</span><span class="p">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">issueDateTime</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">maturityDateTime</span><span class="p">,</span>
       <span class="n">args</span><span class="p">.</span><span class="n">faceValue</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">paperRate</span>
     <span class="p">);</span>

     <span class="k">return</span> <span class="n">response</span><span class="p">;</span>

   <span class="err">}</span>
</code></pre></div>

<p><strong>14.</strong> Now, we need to copy our <code>networkConnection.yaml</code> file over from <code>magnetocorp</code> in our <code>fabric-samples-cp</code> folder and place it into our <code>magnetocorp</code> folder. You can execute the command below, from our terminal application, as to how to copy:</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop/magnetocorp$ cp /home/tecadmin/Desktop/fabric-samples-cp/commercial-paper/organization/magnetocorp/gateway/networkConnection.yaml .</span>
<span class="err">#</span>
</code></pre></div>

<p><strong>15.</strong> From VSCode, go to the IBM Blockchain Platform Extension and right click on <code>local_fabric_wallet</code> and select <code>Add Identity to Wallet</code>. From there follow the prompt as it follows below:</p>
<div class="codehilite"><pre><span></span><code><span class="err">Provide a Name for the Identity:</span>
<span class="err">    isabella</span>
<span class="err">Enter MSPID:</span>
<span class="err">    Org1MSP</span>
<span class="err">Choose a method of adding an identity:</span>
<span class="err">    Provide an enrollment ID and secret</span>
<span class="err">Enter Enrollment ID:</span>
<span class="err">    admin</span>
<span class="err">Enter Enrollment secret:</span>
<span class="err">    adminpw</span>
</code></pre></div>

<p><strong>16.</strong> We need to modify our <code>package.json</code> file to include the <code>fabric-network</code> module. Within our <code>magnetocorp</code> folder, find the <code>package.json</code> file and add in the following text below on <code>line 58</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;fabric-network&quot;: &quot;~1.4.1&quot;</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note<p>Your line number may differ- the important thing is that this line is added to the end of the <em>dependencies</em> section, and not in the <em>dev-dependencies</em> section.</p>
</p>
</div>
<p>So now our <code>dependencies</code> look like this:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;dependencies&quot;: {</span>
<span class="err">    &quot;@loopback/boot&quot;: &quot;^1.4.0&quot;,</span>
<span class="err">    &quot;@loopback/context&quot;: &quot;^1.19.0&quot;,</span>
<span class="err">    &quot;@loopback/core&quot;: &quot;^1.8.1&quot;,</span>
<span class="err">    &quot;@loopback/openapi-v3&quot;: &quot;^1.6.1&quot;,</span>
<span class="err">    &quot;@loopback/repository&quot;: &quot;^1.6.1&quot;,</span>
<span class="err">    &quot;@loopback/rest&quot;: &quot;^1.15.0&quot;,</span>
<span class="err">    &quot;@loopback/rest-explorer&quot;: &quot;^1.2.1&quot;,</span>
<span class="err">    &quot;@loopback/service-proxy&quot;: &quot;^1.2.1&quot;,</span>
<span class="err">    &quot;fabric-network&quot;: &quot;~1.4.1&quot;</span>
</code></pre></div>

<p><strong>Do not forget to add a comma after the "@loopback/service-proxy": "^1.2.1" dependency above the line you just added.</strong></p>
<p><strong>Go ahead and save this file!</strong></p>
<p><strong>17.</strong> Now we can delete the <code>node_modules</code> and <code>package-lock.json</code> file so that it will pick up the <code>fabric-network</code> package when we do an npm install again. To do this, within VSCode, right click on <code>node_modules</code> and select <code>Delete</code>. Do the same for <code>package-lock.json</code>. If it asks you to confirm this, select <code>Move to Trash</code>.</p>
<p><strong>18.</strong> Back in our terminal application, do an <code>npm install</code> within the <code>magnetocorp</code> folder:</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop/magnetocorp$ npm install</span>
<span class="err">*</span>
<span class="err">*</span>
<span class="err">*</span>
<span class="err">added 748 packages from 1578 contributors and audited 4980 packages in 45.757s</span>
<span class="err">found 3 vulnerabilities (1 low, 2 moderate)</span>
</code></pre></div>

<p><strong>19.</strong> Then you can do an <code>npm build</code> as well from the same folder:</p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="p">@</span><span class="nl">ubuntubase</span><span class="p">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp$</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>

<span class="o">&gt;</span> <span class="n">magnetocorp</span><span class="mf">@1.0.0</span> <span class="n">build</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span>
<span class="o">&gt;</span> <span class="n">lb</span><span class="o">-</span><span class="n">tsc</span> <span class="n">es2017</span> <span class="o">--</span><span class="n">outDir</span> <span class="n">dist</span>
</code></pre></div>

<p><strong>20.</strong> We will hold off on starting the server until we have built the DigiBank loopback application as well. </p>
<p><strong>21.</strong> Speaking of DigiBank, let's build their loopback API application. It will be very similar to how we built MagnetoCorp's. </p>
<p><strong>22.</strong> Go ahead and follow the series of commands and prompts below to create Digibank's loopback application. I'll explain these after we have completed this:</p>
<div class="codehilite"><pre><span></span><code><span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">Our</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">app</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">digibank</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="nl">description</span><span class="p">:</span><span class="w"> </span><span class="n">loopback</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">digibank</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="nl">directory</span><span class="p">:</span><span class="w"> </span><span class="n">digibank</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">DigibankApplication</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="o">&lt;</span><span class="nf">space</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">select</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="ow">all</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">invert</span><span class="w"> </span><span class="n">selection</span><span class="p">)</span><span class="n">Enable</span><span class="w"> </span><span class="n">eslint</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">prettier</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">mocha</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">loopbackBuild</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">vscode</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">docker</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">repositories</span><span class="p">,</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">services</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">eslintignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">eslintrc</span><span class="p">.</span><span class="n">js</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">mocharc</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">npmrc</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">prettierignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">prettierrc</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">DEVELOPING</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">package</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">tsconfig</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">vscode</span><span class="o">/</span><span class="n">settings</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">vscode</span><span class="o">/</span><span class="n">tasks</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">gitignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="p">.</span><span class="n">dockerignore</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">Dockerfile</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="p">.</span><span class="n">js</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="k">public</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">html</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">application</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">migrate</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="k">sequence</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">ping</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">acceptance</span><span class="o">/</span><span class="n">home</span><span class="o">-</span><span class="n">page</span><span class="p">.</span><span class="n">acceptance</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">acceptance</span><span class="o">/</span><span class="n">ping</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">acceptance</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">__tests__</span><span class="o">/</span><span class="n">acceptance</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">helper</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>


<span class="n">Application</span><span class="w"> </span><span class="n">digibank</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">digibank</span><span class="p">.</span><span class="w"></span>


<span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">Buy</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="err">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">digibank</span><span class="o">/</span><span class="w"></span>
<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">model</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">buy</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Allow</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="p">(</span><span class="k">free</span><span class="o">-</span><span class="n">form</span><span class="p">)</span><span class="w"> </span><span class="n">properties</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="n">Let</span><span class="s1">&#39;s add a property to Buy</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: issuer</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is issuer the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Buy</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Buy</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: currentOwner</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is currentOwner the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Buy</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">newOwner</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">newOwner</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Buy</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: price</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is price the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Buy</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">purchaseDateTime</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">purchaseDateTime</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Buy</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: </span>
<span class="s1">   create src/models/buy.model.ts</span>
<span class="s1">   update src/models/index.ts</span>

<span class="s1">Model buy was created in src/models/</span>

<span class="s1">----- Create Model for our Redeem -----</span>

<span class="s1">tecadmin@ubuntubase:~/Desktop/digibank$ lb4 model</span>
<span class="s1">? Model class name: redeem</span>
<span class="s1">? Please select the model base class Entity (A persisted model with an ID)</span>
<span class="s1">? Allow additional (free-form) properties? No</span>
<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Redeem</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">issuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Redeem</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: paperNumber</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is paperNumber the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Redeem</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">redeemingOwner</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">redeemingOwner</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to Redeem</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: redeemDateTime</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is redeemingOwner the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Redeem</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">redeem</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Model</span><span class="w"> </span><span class="n">redeem</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="w"></span>

<span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">getPaperRate</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">model</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">getPaperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Allow</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="p">(</span><span class="k">free</span><span class="o">-</span><span class="n">form</span><span class="p">)</span><span class="w"> </span><span class="n">properties</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="n">Let</span><span class="s1">&#39;s add a property to GetPaperRate</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: issuer</span>
<span class="s1">? Property type: string</span>
<span class="s1">? Is issuer the ID property? No</span>
<span class="s1">? Is it required?: Yes</span>
<span class="s1">? Default value [leave blank for none]:</span>

<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">paperNumber</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="s1">&#39;s add another property to GetPaperRate</span>
<span class="s1">Enter an empty property name when done</span>

<span class="s1">? Enter the property name: </span>
<span class="s1">   create src/models/get-paper-rate.model.ts</span>
<span class="s1">   update src/models/index.ts</span>

<span class="s1">Model getPaperRate was created in src/models/</span>

<span class="s1">----- Create Model for our getAllPapersFromIssuer -----</span>

<span class="s1">tecadmin@ubuntubase:~/Desktop/digibank$ lb4 model</span>
<span class="s1">? Model class name: getAllPapersFromIssuer</span>
<span class="s1">? Please select the model base class Entity (A persisted model with an ID)</span>
<span class="s1">? Allow additional (free-form) properties? No</span>
<span class="s1">Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">paperIssuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">paperIssuer</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="vm">?</span><span class="w"> </span><span class="k">No</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">required</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">[</span><span class="n">leave blank for none</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="n">Let</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">done</span><span class="w"></span>

<span class="vm">?</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuer</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Model</span><span class="w"> </span><span class="n">getAllPapersFromIssuer</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="w"></span>

<span class="w">    </span><span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Datasource</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">datasource</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Datasource</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">db</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">connector</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">db</span><span class="p">:</span><span class="w"> </span><span class="ow">In</span><span class="o">-</span><span class="n">memory</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="p">(</span><span class="n">supported</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">StrongLoop</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">window</span><span class="p">.</span><span class="n">localStorage</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">persistence</span><span class="w"> </span><span class="p">(</span><span class="n">browser</span><span class="w"> </span><span class="k">only</span><span class="p">)</span><span class="err">:</span><span class="w"> </span>
<span class="vm">?</span><span class="w"> </span><span class="k">Full</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">persistence</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="w"> </span><span class="k">only</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">datasource</span><span class="p">.</span><span class="n">json</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="n">db</span><span class="p">.</span><span class="n">datasource</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Datasource</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">datasources</span><span class="o">/</span><span class="w"></span>

<span class="w">    </span><span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Repository</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">repository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">datasource</span><span class="w"> </span><span class="n">DbDatasource</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="k">Select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="o">&lt;</span><span class="nf">space</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">select</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="ow">all</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">invert</span><span class="w"> </span><span class="n">selection</span><span class="p">)</span><span class="n">Buy</span><span class="p">,</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="p">,</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="p">,</span><span class="w"> </span><span class="n">Redeem</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">DefaultCrudRepository</span><span class="w"> </span><span class="p">(</span><span class="n">Legacy</span><span class="w"> </span><span class="n">juggler</span><span class="w"> </span><span class="n">bridge</span><span class="p">)</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">Buy</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">GetAllPapersFromIssuer</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">GetPaperRate</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">Redeem</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">buy</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuer</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rate</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">redeem</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Repositories</span><span class="w"> </span><span class="n">BuyRepository</span><span class="p">,</span><span class="n">GetAllPapersFromIssuerRepository</span><span class="p">,</span><span class="n">GetPaperRateRepository</span><span class="p">,</span><span class="n">RedeemRepository</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="w"></span>

<span class="o">-----</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="k">Transaction</span><span class="w"> </span><span class="o">-----</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">Buy</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">Buy</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">BuyRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="n">buys</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">buy</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">Buy</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">Redeem</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">Redeem</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">RedeemRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="n">redeems</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">redeem</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">Redeem</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetPaperRateRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rates</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="n">paper</span><span class="o">-</span><span class="n">rate</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">GetPaperRate</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>

<span class="n">tecadmin</span><span class="nv">@ubuntubase</span><span class="err">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span><span class="err">$</span><span class="w"> </span><span class="n">lb4</span><span class="w"> </span><span class="n">controller</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="vm">?</span><span class="w"> </span><span class="n">REST</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">functions</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">repository</span><span class="vm">?</span><span class="w"> </span><span class="n">GetAllPapersFromIssuerRepository</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">ID</span><span class="vm">?</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="vm">?</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CRUD</span><span class="w"> </span><span class="n">operations</span><span class="vm">?</span><span class="w"> </span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuers</span><span class="w"></span>
<span class="w">   </span><span class="k">create</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">get</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">papers</span><span class="o">-</span><span class="k">from</span><span class="o">-</span><span class="n">issuer</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>
<span class="w">   </span><span class="k">update</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="k">index</span><span class="p">.</span><span class="n">ts</span><span class="w"></span>

<span class="n">Controller</span><span class="w"> </span><span class="n">GetAllPapersFromIssuer</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="w"></span>
</code></pre></div>

<p>You just did the same thing for DigiBank, as you earlier did for MagnetoCorp and their loopback API application. </p>
<p><strong>23.</strong> Within VSCode, go to the <code>Explorer Perspective</code> and do <code>File -&gt; Add Folder to Workplace</code> and navigate to the <code>digibank</code> folder that we just created within the <code>Desktop</code> folder. Go ahead and open that folder in VSCode.</p>
<p><strong>24.</strong> Now within VSCode, right click on <code>digibank</code> - the folder you just opened in VSCode. Once you right click, select <code>New Folder</code> and name it <code>data</code>. Really mysterious right? </p>
<p><strong>25.</strong> On the newly created folder, <code>data</code>, right click on that folder and select <code>New File</code> and name that file <code>db.json</code>. Within that new file, add in this text below:</p>
<div class="codehilite"><pre><span></span><code><span class="err">{</span>
<span class="err">  &quot;ids&quot;: {</span>
<span class="err">    &quot;Todo&quot;: 5</span>
<span class="err">  },</span>
<span class="err">  &quot;models&quot;: {</span>
<span class="err">    &quot;Todo&quot;: {</span>
<span class="err">      &quot;1&quot;: &quot;{\&quot;title\&quot;:\&quot;Take over the galaxy\&quot;,\&quot;desc\&quot;:\&quot;MWAHAHAHAHAHAHAHAHAHAHAHAHAMWAHAHAHAHAHAHAHAHAHAHAHAHA\&quot;,\&quot;id\&quot;:1}&quot;,</span>
<span class="err">      &quot;2&quot;: &quot;{\&quot;title\&quot;:\&quot;destroy alderaan\&quot;,\&quot;desc\&quot;:\&quot;Make sure there are no survivors left!\&quot;,\&quot;id\&quot;:2}&quot;,</span>
<span class="err">      &quot;3&quot;: &quot;{\&quot;title\&quot;:\&quot;terrorize senate\&quot;,\&quot;desc\&quot;:\&quot;Tell them they&#39;re getting a budget cut.\&quot;,\&quot;id\&quot;:3}&quot;,</span>
<span class="err">      &quot;4&quot;: &quot;{\&quot;title\&quot;:\&quot;crush rebel scum\&quot;,\&quot;desc\&quot;:\&quot;Every.Last.One.\&quot;,\&quot;id\&quot;:4}&quot;</span>
<span class="err">    }</span>
<span class="err">  }</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong> This file, db.json, contains an example database.</p>
<p><strong>26.</strong> Within the <code>digibank</code> folder in VSCode, navigate to the following folder:</p>
<div class="codehilite"><pre><span></span><code><span class="err">digibank -&gt; src -&gt; repositories</span>
</code></pre></div>

<p>You should see 6 files in there: <code>README.md</code>, <code>buy.repository.ts</code>, <code>redeem.repository.ts</code>, <code>get-paper-rate.repository.ts</code>, <code>get-all-papers-from-issuer.repository.ts</code> and <code>index.ts</code></p>
<p><strong>27.</strong> Within the <code>buy.repository.ts</code> file, add <code>//</code> on line 8. Look below as to what to do:</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">Buy</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">Buy</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>28.</strong> Within the <code>Redeem.repository.ts</code> file, add <code>//</code> on line 8. Look below as to what to do:</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">Redeem</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">Redeem</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>29.</strong> Within the <code>get-paper-rate.repository.ts</code> file, add <code>//</code> on line 8. Look below as to what to do:</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">GetPaperRate</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">GetPaperRate</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>30.</strong> Within the <code>get-all-papers-from-issuer.repository.ts</code> file, add <code>//</code> on line 8. Look below as to what to do:</p>
<div class="codehilite"><pre><span></span><code><span class="n">typeof</span> <span class="n">GetAllPapersFromIssuer</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="o">//</span> <span class="n">typeof</span> <span class="n">GetAllPapersFromIssuer</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">id</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>31.</strong> Within the <code>digibank</code> folder in VSCode, navigate to the following folder:</p>
<div class="codehilite"><pre><span></span><code><span class="err">digibank -&gt; src -&gt; controllers</span>
</code></pre></div>

<p>You should see 7 files in there: <code>README.md</code>, <code>buy.controller.ts</code>, <code>redeem.controller.ts</code>, <code>get-paper-rate.controller.ts</code>, <code>get-papers-from-issuer.controller.ts</code>, <code>ping.controller.ts</code>, and <code>index.ts</code></p>
<p><strong>32.</strong> Within the <code>buy.controller.ts</code> file, delete all of its contents and paste in the code that is below:</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span> <span class="n">Copyright</span> <span class="n">IBM</span> <span class="n">Corp</span><span class="o">.</span> <span class="mi">2017</span><span class="p">,</span><span class="mf">2018.</span> <span class="n">All</span> <span class="n">Rights</span> <span class="n">Reserved</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Node</span> <span class="n">module</span><span class="p">:</span> <span class="nd">@loopback</span><span class="o">/</span><span class="n">example</span><span class="o">-</span><span class="n">todo</span>
<span class="o">//</span> <span class="n">This</span> <span class="nb">file</span> <span class="ow">is</span> <span class="n">licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">MIT</span> <span class="n">License</span><span class="o">.</span>
<span class="o">//</span> <span class="n">License</span> <span class="n">text</span> <span class="n">available</span> <span class="n">at</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">opensource</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">MIT</span>

<span class="kn">import</span> <span class="p">{</span>
  <span class="k">del</span><span class="p">,</span>
  <span class="n">get</span><span class="p">,</span>
  <span class="n">getFilterSchemaFor</span><span class="p">,</span>
  <span class="n">param</span><span class="p">,</span>
  <span class="n">patch</span><span class="p">,</span>
  <span class="n">post</span><span class="p">,</span>
  <span class="n">put</span><span class="p">,</span>
  <span class="n">requestBody</span><span class="p">,</span>
<span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Buy</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../models&#39;</span><span class="p">;</span>

<span class="kn">import</span> <span class="p">{</span> <span class="n">BlockChainModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../blockchainClient&#39;</span><span class="p">;</span>

<span class="n">let</span> <span class="n">blockchainClient</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BlockChainModule</span><span class="o">.</span><span class="n">BlockchainClient</span><span class="p">();</span>

<span class="n">export</span> <span class="k">class</span> <span class="nc">BuyController</span> <span class="p">{</span>
  <span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nd">@post</span><span class="p">(</span><span class="s1">&#39;/buy&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">responses</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;200&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">description</span><span class="p">:</span> <span class="s1">&#39;Todo model instance&#39;</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;application/json&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="n">schema</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;x-ts-type&#39;</span><span class="p">:</span> <span class="n">Buy</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">})</span>
  <span class="n">async</span> <span class="n">createBuy</span><span class="p">(</span><span class="nd">@requestBody</span><span class="p">()</span> <span class="n">requestBody</span><span class="p">:</span> <span class="n">Buy</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">Buy</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Buy, requestBody: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">requestBody</span><span class="p">)</span>
    <span class="n">let</span> <span class="n">networkObj</span> <span class="o">=</span> <span class="n">await</span> <span class="n">blockchainClient</span><span class="o">.</span><span class="n">connectToNetwork</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">networkObj</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">let</span> <span class="n">errString</span> <span class="o">=</span> <span class="s1">&#39;Error connecting to network&#39;</span><span class="p">;</span>
      <span class="n">let</span> <span class="n">buy</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Buy</span><span class="p">({</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">paperNumber</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">currentOwner</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">newOwner</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span>
      <span class="n">price</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">purchaseDateTime</span><span class="p">:</span> <span class="n">errString</span>
     <span class="p">});</span>
     <span class="k">return</span> <span class="n">buy</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;newtork obj: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">networkObj</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">dateStr</span> <span class="o">=</span> <span class="n">dateStr</span><span class="o">.</span><span class="n">toDateString</span><span class="p">();</span>
    <span class="n">let</span> <span class="n">dataForBuy</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">function</span><span class="p">:</span> <span class="s1">&#39;buy&#39;</span><span class="p">,</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span>
      <span class="n">paperNumber</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span>
      <span class="n">currentOwner</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">currentOwner</span><span class="p">,</span>
      <span class="n">newOwner</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">newOwner</span><span class="p">,</span>
      <span class="n">price</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">price</span><span class="p">,</span>
      <span class="n">purchaseDateTime</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">purchaseDateTime</span><span class="p">,</span>
      <span class="n">contract</span><span class="p">:</span> <span class="n">networkObj</span><span class="o">.</span><span class="n">contract</span>
    <span class="p">};</span>

   <span class="n">var</span> <span class="n">resultAsBuffer</span> <span class="o">=</span> <span class="n">await</span> <span class="n">blockchainClient</span><span class="o">.</span><span class="n">buy</span><span class="p">(</span><span class="n">dataForBuy</span><span class="p">);</span>

    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;result from blockchainClient.submitTransaction in controller: &#39;</span><span class="p">)</span>
    <span class="n">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">resultAsBuffer</span><span class="p">))</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>
    <span class="n">let</span> <span class="n">buy</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Buy</span><span class="p">({</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">paperNumber</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">currentOwner</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">currentOwner</span><span class="p">,</span>
      <span class="n">newOwner</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">currentOwner</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">purchaseDateTime</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">purchaseDateTime</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="n">buy</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>33.</strong> Within the <code>redeem.controller.ts</code> file, delete all of its contents and paste in the code that is below:</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span> <span class="n">Copyright</span> <span class="n">IBM</span> <span class="n">Corp</span><span class="o">.</span> <span class="mi">2017</span><span class="p">,</span><span class="mf">2018.</span> <span class="n">All</span> <span class="n">Rights</span> <span class="n">Reserved</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Node</span> <span class="n">module</span><span class="p">:</span> <span class="nd">@loopback</span><span class="o">/</span><span class="n">example</span><span class="o">-</span><span class="n">todo</span>
<span class="o">//</span> <span class="n">This</span> <span class="nb">file</span> <span class="ow">is</span> <span class="n">licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">MIT</span> <span class="n">License</span><span class="o">.</span>
<span class="o">//</span> <span class="n">License</span> <span class="n">text</span> <span class="n">available</span> <span class="n">at</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">opensource</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">MIT</span>

<span class="kn">import</span> <span class="p">{</span>
  <span class="k">del</span><span class="p">,</span>
  <span class="n">get</span><span class="p">,</span>
  <span class="n">getFilterSchemaFor</span><span class="p">,</span>
  <span class="n">param</span><span class="p">,</span>
  <span class="n">patch</span><span class="p">,</span>
  <span class="n">post</span><span class="p">,</span>
  <span class="n">put</span><span class="p">,</span>
  <span class="n">requestBody</span><span class="p">,</span>
<span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Redeem</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../models&#39;</span><span class="p">;</span>

<span class="kn">import</span> <span class="p">{</span> <span class="n">BlockChainModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;../blockchainClient&#39;</span><span class="p">;</span>

<span class="n">let</span> <span class="n">blockchainClient</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BlockChainModule</span><span class="o">.</span><span class="n">BlockchainClient</span><span class="p">();</span>

<span class="n">export</span> <span class="k">class</span> <span class="nc">RedeemController</span> <span class="p">{</span>
  <span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nd">@post</span><span class="p">(</span><span class="s1">&#39;/redeem&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">responses</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;200&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">description</span><span class="p">:</span> <span class="s1">&#39;Todo model instance&#39;</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;application/json&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="n">schema</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;x-ts-type&#39;</span><span class="p">:</span> <span class="n">Redeem</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">})</span>
  <span class="n">async</span> <span class="n">createIssue</span><span class="p">(</span><span class="nd">@requestBody</span><span class="p">()</span> <span class="n">requestBody</span><span class="p">:</span> <span class="n">Redeem</span><span class="p">):</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">Redeem</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Buy, requestBody: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">requestBody</span><span class="p">)</span>

    <span class="n">let</span> <span class="n">networkObj</span> <span class="o">=</span> <span class="n">await</span> <span class="n">blockchainClient</span><span class="o">.</span><span class="n">connectToNetwork</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">networkObj</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">let</span> <span class="n">errString</span> <span class="o">=</span> <span class="s1">&#39;Error connecting to network&#39;</span><span class="p">;</span>
      <span class="n">let</span> <span class="n">redeem</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Redeem</span><span class="p">({</span>
        <span class="n">issuer</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">paperNumber</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span> <span class="n">redeemingOwner</span><span class="p">:</span> <span class="n">errString</span><span class="p">,</span>
        <span class="n">redeemDateTime</span><span class="p">:</span> <span class="n">errString</span>
          <span class="p">});</span>
      <span class="k">return</span> <span class="n">redeem</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;newtork obj: &#39;</span><span class="p">)</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">networkObj</span><span class="p">)</span>

    <span class="n">let</span> <span class="n">dataForRedeem</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">function</span><span class="p">:</span> <span class="s1">&#39;redeem&#39;</span><span class="p">,</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span>
      <span class="n">paperNumber</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span>
      <span class="n">redeemingOwner</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">redeemingOwner</span><span class="p">,</span>
      <span class="n">redeemDateTime</span><span class="p">:</span> <span class="n">requestBody</span><span class="o">.</span><span class="n">redeemDateTime</span><span class="p">,</span>
      <span class="n">contract</span><span class="p">:</span> <span class="n">networkObj</span><span class="o">.</span><span class="n">contract</span>
    <span class="p">};</span>

    <span class="n">var</span> <span class="n">resultAsBuffer</span> <span class="o">=</span> <span class="n">await</span> <span class="n">blockchainClient</span><span class="o">.</span><span class="n">redeem</span><span class="p">(</span><span class="n">dataForRedeem</span><span class="p">);</span>

   <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;result from blockchainClient.submitTransaction in controller: &#39;</span><span class="p">)</span>
   <span class="n">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">resultAsBuffer</span><span class="p">))</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>
   <span class="n">let</span> <span class="n">issue</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Redeem</span><span class="p">({</span>
      <span class="n">issuer</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">paperNumber</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">redeemingOwner</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">redeemingOwner</span><span class="p">,</span>
      <span class="n">redeemDateTime</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">redeemDateTime</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="n">issue</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>34.</strong> Within VSCode, right click on the <code>src</code> folder (within the <code>digibank</code> folder) and select <code>New File</code>. Go ahead and name this file <code>blockchainClient.ts</code></p>
<p><strong>35.</strong> Within our new <code>blockchainClient.ts</code> file, paste in this code below:</p>
<div class="codehilite"><pre><span></span><code><span class="k">const</span> <span class="n">yaml</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;js-yaml&#39;</span><span class="p">);</span>
<span class="k">const</span> <span class="p">{</span> <span class="n">FileSystemWallet</span><span class="p">,</span> <span class="n">Gateway</span> <span class="p">}</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;fabric-network&#39;</span><span class="p">);</span>
<span class="k">const</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">A</span> <span class="n">wallet</span> <span class="n">stores</span> <span class="n">a</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">identities</span> <span class="k">for</span> <span class="n">use</span>
<span class="k">const</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileSystemWallet</span><span class="p">(</span><span class="s1">&#39;/home/tecadmin/.fabric-vscode/local_fabric_wallet&#39;</span><span class="p">);</span>


<span class="k">export</span> <span class="n">module</span> <span class="n">BlockChainModule</span> <span class="p">{</span>

  <span class="k">export</span> <span class="k">class</span> <span class="n">BlockchainClient</span> <span class="p">{</span>
    <span class="n">async</span> <span class="n">connectToNetwork</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">const</span> <span class="n">gateway</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Gateway</span><span class="p">();</span>

      <span class="n">try</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;connecting to Fabric network...&#39;</span><span class="p">)</span>


        <span class="k">const</span> <span class="n">identityLabel</span> <span class="o">=</span> <span class="s1">&#39;balaji&#39;</span><span class="p">;</span>
        <span class="n">let</span> <span class="n">connectionProfile</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safeLoad</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">&#39;/home/tecadmin/Desktop/digibank/networkConnection.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">));</span>

        <span class="n">let</span> <span class="n">connectionOptions</span> <span class="o">=</span> <span class="p">{</span>
          <span class="n">identity</span><span class="p">:</span> <span class="n">identityLabel</span><span class="p">,</span>
          <span class="n">wallet</span><span class="p">:</span> <span class="n">wallet</span><span class="p">,</span>
          <span class="n">discovery</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">asLocalhost</span><span class="p">:</span> <span class="bp">true</span><span class="p">,</span>
            <span class="n">enabled</span><span class="p">:</span> <span class="bp">true</span>
          <span class="p">}</span>
        <span class="p">};</span>

        <span class="o">//</span> <span class="n">Connect</span> <span class="n">to</span> <span class="n">gateway</span> <span class="n">using</span> <span class="n">network</span><span class="o">.</span><span class="n">yaml</span> <span class="n">file</span> <span class="ow">and</span> <span class="n">our</span> <span class="n">certificates</span> <span class="ow">in</span> <span class="n">_idwallet</span> <span class="n">directory</span>
        <span class="n">await</span> <span class="n">gateway</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">connectionProfile</span><span class="p">,</span> <span class="n">connectionOptions</span><span class="p">);</span>

        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Connected to Fabric gateway.&#39;</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Connect</span> <span class="n">to</span> <span class="n">our</span> <span class="n">local</span> <span class="n">fabric</span>
        <span class="k">const</span> <span class="n">network</span> <span class="o">=</span> <span class="n">await</span> <span class="n">gateway</span><span class="o">.</span><span class="n">getNetwork</span><span class="p">(</span><span class="s1">&#39;mychannel&#39;</span><span class="p">);</span>

        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Connected to mychannel. &#39;</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">we</span> <span class="n">have</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span>
        <span class="k">const</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">await</span> <span class="n">network</span><span class="o">.</span><span class="n">getContract</span><span class="p">(</span><span class="s1">&#39;papercontract&#39;</span><span class="p">);</span>


        <span class="n">let</span> <span class="n">networkObj</span> <span class="o">=</span> <span class="p">{</span>
          <span class="n">contract</span><span class="p">:</span> <span class="n">contract</span><span class="p">,</span>
          <span class="n">network</span><span class="p">:</span> <span class="n">network</span>
        <span class="p">};</span>

        <span class="k">return</span> <span class="n">networkObj</span><span class="p">;</span>

      <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Error</span> <span class="n">processing</span> <span class="n">transaction</span><span class="o">.</span> <span class="o">$</span><span class="p">{</span><span class="n">error</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">stack</span><span class="p">);</span>
      <span class="p">}</span> <span class="n">finally</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Done connecting to network.&#39;</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">gateway</span><span class="o">.</span><span class="n">disconnect</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="n">async</span> <span class="n">redeem</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">any</span><span class="p">)</span> <span class="p">{</span>

      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;args for redeem: &#39;</span><span class="p">)</span>
      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

      <span class="n">let</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">args</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">submitTransaction</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
        <span class="n">args</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">redeemingOwner</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">redeemDateTime</span>
      <span class="p">);</span>

      <span class="k">return</span> <span class="n">response</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="n">async</span> <span class="n">buy</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">any</span><span class="p">)</span> <span class="p">{</span>

      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;args for buy: &#39;</span><span class="p">)</span>
      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

      <span class="n">let</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">args</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">submitTransaction</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
        <span class="n">args</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">paperNumber</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">currentOwner</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">newOwner</span><span class="p">,</span>
        <span class="n">args</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">purchaseDateTime</span>
      <span class="p">);</span>

      <span class="k">return</span> <span class="n">response</span><span class="p">;</span>

    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Go ahead and save this file!</strong></p>
<p><strong>36.</strong> Now, we need to copy our <code>networkConnection.yaml</code> file over from <code>digibank</code> in our <code>fabric-samples-cp</code> folder and place it into our <code>digibank</code> folder. You can execute the command below, from our terminal application, as to how to copy:</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop/digibank$ cp /home/tecadmin/Desktop/fabric-samples-cp/commercial-paper/organization/digibank/gateway/networkConnection.yaml .</span>
<span class="err">#</span>
</code></pre></div>

<p><strong>37.</strong> From VSCode, go to the IBM Blockchain Platform Extension and right click on <code>local_fabric_wallet</code> and select <code>Add Identity to Wallet</code>. From there follow the prompt as it follows below:</p>
<div class="codehilite"><pre><span></span><code><span class="err">Provide a Name for the Identity:</span>
<span class="err">    balaji</span>
<span class="err">Enter MSPID:</span>
<span class="err">    Org1MSP</span>
<span class="err">Choose a method of adding an identity:</span>
<span class="err">    Provide an enrollment ID and secret</span>
<span class="err">Enter Enrollment ID:</span>
<span class="err">    admin</span>
<span class="err">Enter Enrollment secret:</span>
<span class="err">    adminpw</span>
</code></pre></div>

<p><strong>38.</strong> Within our <code>digibank</code> folder in VSCode, find the <code>index.js</code> file. In here there is a port number we need to change. Since <code>magnetocorp</code> is occupying port <code>3000</code>, we should make <code>digibank</code> occupy port <code>3001</code>. You can find the port number within the <code>index.js</code> file on line 9. Look below at to what to do:</p>
<div class="codehilite"><pre><span></span><code><span class="n">port</span><span class="p">:</span> <span class="o">+</span><span class="n">process</span><span class="p">.</span><span class="n">env</span><span class="p">.</span><span class="n">PORT</span> <span class="o">||</span> <span class="mi">3000</span><span class="p">,</span>

<span class="c1">--- CHANGE TO ---</span>

<span class="n">port</span><span class="p">:</span> <span class="o">+</span><span class="n">process</span><span class="p">.</span><span class="n">env</span><span class="p">.</span><span class="n">PORT</span> <span class="o">||</span> <span class="mi">3001</span><span class="p">,</span>
</code></pre></div>

<p><strong>39.</strong> We need to modify our <code>package.json</code> file to include the <code>fabric-network</code> module. Within our <code>digibank</code> folder, find the <code>package.json</code> file and add in the following text below on <code>line 58</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;fabric-network&quot;: &quot;~1.4.1&quot;</span>
</code></pre></div>

<p>So now our <code>dependencies</code> look like this:</p>
<div class="codehilite"><pre><span></span><code><span class="err">  &quot;dependencies&quot;: {</span>
<span class="err">    &quot;@loopback/boot&quot;: &quot;^1.4.0&quot;,</span>
<span class="err">    &quot;@loopback/context&quot;: &quot;^1.19.0&quot;,</span>
<span class="err">    &quot;@loopback/core&quot;: &quot;^1.8.1&quot;,</span>
<span class="err">    &quot;@loopback/openapi-v3&quot;: &quot;^1.6.1&quot;,</span>
<span class="err">    &quot;@loopback/repository&quot;: &quot;^1.6.1&quot;,</span>
<span class="err">    &quot;@loopback/rest&quot;: &quot;^1.15.0&quot;,</span>
<span class="err">    &quot;@loopback/rest-explorer&quot;: &quot;^1.2.1&quot;,</span>
<span class="err">    &quot;@loopback/service-proxy&quot;: &quot;^1.2.1&quot;,</span>
<span class="err">    &quot;fabric-network&quot;: &quot;~1.4.1&quot;</span>
</code></pre></div>

<p><strong>Do not forget to add a comma after the "@loopback/service-proxy": "^1.2.1" dependency</strong></p>
<p><strong>Go ahead and save this file!</strong></p>
<p><strong>40.</strong> Now we can delete the <code>node_modules</code> and <code>package-lock.json</code> file so that it will pick up the <code>fabric-network</code> package when we do an npm install again. To do this, within VSCode, right click on <code>node_modules</code> and select <code>Delete</code>. Do the same for <code>node_modules</code>. If it asks you to confirm this, select <code>Move to Trash</code>.</p>
<p><strong>41.</strong> Back in our terminal application, do an <code>npm install</code> within the <code>digibank</code> folder:</p>
<div class="codehilite"><pre><span></span><code><span class="err">tecadmin@ubuntubase:~/Desktop/digibank$ npm install</span>
<span class="err">*</span>
<span class="err">*</span>
<span class="err">*</span>
<span class="err">added 748 packages from 1578 contributors and audited 4980 packages in 45.757s</span>
<span class="err">found 3 vulnerabilities (1 low, 2 moderate)</span>
</code></pre></div>

<p><strong>42.</strong> Then you can do an <code>npm build</code> as well from the same folder:</p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="p">@</span><span class="nl">ubuntubase</span><span class="p">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank$</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>

<span class="o">&gt;</span> <span class="n">magnetocorp</span><span class="o">-</span><span class="n">commercialpaper</span><span class="mf">@1.0.0</span> <span class="n">build</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span>
<span class="o">&gt;</span> <span class="n">lb</span><span class="o">-</span><span class="n">tsc</span> <span class="n">es2017</span> <span class="o">--</span><span class="n">outDir</span> <span class="n">dist</span>
</code></pre></div>

<p><strong>43.</strong> Now, we can start both loopback applications. Let's first go start MagnetoCorp's. To do this, go to your terminal application - where you generated the <code>magnetocorp</code> folder. Then run the command below:</p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="p">@</span><span class="nl">ubuntubase</span><span class="p">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp$</span> <span class="n">npm</span> <span class="n">start</span>

<span class="o">&gt;</span> <span class="n">magnetocorp</span><span class="mf">@1.0.0</span> <span class="n">prestart</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span>
<span class="o">&gt;</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>


<span class="o">&gt;</span> <span class="n">magnetocorp</span><span class="mf">@1.0.0</span> <span class="n">build</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span>
<span class="o">&gt;</span> <span class="n">lb</span><span class="o">-</span><span class="n">tsc</span> <span class="n">es2017</span> <span class="o">--</span><span class="n">outDir</span> <span class="n">dist</span>


<span class="o">&gt;</span> <span class="n">magnetocorp</span><span class="mf">@1.0.0</span> <span class="n">start</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">magnetocorp</span>
<span class="o">&gt;</span> <span class="n">node</span> <span class="p">.</span>

<span class="n">Server</span> <span class="n">is</span> <span class="n">running</span> <span class="n">at</span> <span class="nl">http</span><span class="p">:</span><span class="c1">//[::1]:3000</span>
<span class="n">Try</span> <span class="nl">http</span><span class="p">:</span><span class="c1">//[::1]:3000/ping</span>
</code></pre></div>

<p><strong>44.</strong> Then go to your <code>digibank</code> terminal application and do the same command:</p>
<div class="codehilite"><pre><span></span><code><span class="n">tecadmin</span><span class="p">@</span><span class="nl">ubuntubase</span><span class="p">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank$</span> <span class="n">npm</span> <span class="n">start</span>

<span class="o">&gt;</span> <span class="n">digibank</span><span class="mf">@1.0.0</span> <span class="n">prestart</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span>
<span class="o">&gt;</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>


<span class="o">&gt;</span> <span class="n">digibank</span><span class="mf">@1.0.0</span> <span class="n">build</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span>
<span class="o">&gt;</span> <span class="n">lb</span><span class="o">-</span><span class="n">tsc</span> <span class="n">es2017</span> <span class="o">--</span><span class="n">outDir</span> <span class="n">dist</span>


<span class="o">&gt;</span> <span class="n">digibank</span><span class="mf">@1.0.0</span> <span class="n">start</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecadmin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">digibank</span>
<span class="o">&gt;</span> <span class="n">node</span> <span class="p">.</span>

<span class="n">Server</span> <span class="n">is</span> <span class="n">running</span> <span class="n">at</span> <span class="nl">http</span><span class="p">:</span><span class="c1">//[::1]:3001</span>
<span class="n">Try</span> <span class="nl">http</span><span class="p">:</span><span class="c1">//[::1]:3001/ping</span>
</code></pre></div>

<p><strong>45.</strong> Go to <code>MagnetoCorp's</code> loopback application by going to <code>http://[::1]:3000</code></p>
<p><img alt="image" src="../vscode-images/2-6-39.png" /></p>
<p><strong>46.</strong> Do the same, but this time for DigiBank. You can go to <code>http://[::1]:3001</code>. It should look the same as MagnetoCorp, but says <code>DigiBank's</code> instead. </p>
<p><strong>47.</strong> You can move forward <strong>with both loopback applications</strong> by clicking on the <code>/explorer</code> link toward the bottom</p>
<p><strong>48.</strong> Within the <code>MagnetoCorp</code> loopback UI (<code>port 3000</code>), go ahead and toggle on the <code>Issue</code> controller. Then click on <code>Try it Out</code>.</p>
<p><img alt="image" src="../vscode-images/2-6-42.png" /></p>
<p><strong>49.</strong> Then paste in the code below to issue a new paper in the white space:</p>
<div class="codehilite"><pre><span></span><code><span class="err">{</span>
<span class="err">  &quot;issuer&quot;: &quot;MagnetoCorp&quot;,</span>
<span class="err">  &quot;paperNumber&quot;: &quot;00005&quot;,</span>
<span class="err">  &quot;issueDateTime&quot;: &quot;2020-05-31&quot;,</span>
<span class="err">  &quot;maturityDateTime&quot;: &quot;2020-11-30&quot;,</span>
<span class="err">  &quot;faceValue&quot;: &quot;5000000&quot;,</span>
<span class="err">  &quot;paperRate&quot;: &quot;0.02&quot;</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>50.</strong> Once you have the new paper in there, go ahead and click on the blue <code>Execute</code> button below</p>
<p><strong>51.</strong> Then you will see the output of our <code>issue</code> transaction</p>
<p><img alt="image" src="../vscode-images/2-6-45.png" /></p>
<p>Don't be alarm by the the <code>faceValue</code> and <code>paperRate</code> not appearing in our response. We will confirm that it actually went through here in a second.</p>
<p><strong>52.</strong> From the IBM Blockchain Platform Extension in VSCode, connect to the <code>local_fabric</code> Fabric Gateway and select <code>balaji</code> as your identity to connect with (it will pop up in the top middle). Then untoggle till you see the <code>buy</code> transaction under our <code>papercontract@0.0.2</code> smart contract. Enter the code below - between the brackets - to submit this transaction:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;MagnetoCorp&quot;, &quot;00005&quot;, &quot;MagnetoCorp&quot;, &quot;DigiBank&quot;, &quot;4900000&quot;, &quot;2019-07-31&quot;</span>
</code></pre></div>

<p>You should see a success message below in the bottom right</p>
<p><strong>53.</strong> From same Fabric Gateway, right click on <code>getAllPapersFromIssuer</code> and select <code>Evaluate Transaction</code>. Enter the code below - between the brackets - to submit the query:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;MagnetoCorp&quot;</span>
</code></pre></div>

<p>You should see all of the MagnetoCorp issued papers. Notice, how our paper #00005 has a new owner, <code>DigiBank</code>. </p>
<p><img alt="image" src="../vscode-images/2-6-53.png" /></p>
<p><strong>54.</strong> Now, let's go to our <code>DigiBank</code> loopback application (port: <code>3001</code>) and do a <code>redeem</code> transaction. To do this, untoggle the <code>Redeem</code> controller and click on <code>Try it out</code></p>
<p><strong>55.</strong> Then paste in what is below in the white space:</p>
<div class="codehilite"><pre><span></span><code><span class="err">{</span>
<span class="err">  &quot;issuer&quot;: &quot;MagnetoCorp&quot;,</span>
<span class="err">  &quot;paperNumber&quot;: &quot;00005&quot;,</span>
<span class="err">  &quot;redeemingOwner&quot;: &quot;DigiBank&quot;,</span>
<span class="err">  &quot;redeemDateTime&quot;: &quot;2020-11-30&quot;</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>56.</strong> Once you have that in place, go ahead and click on the blue <code>Execute</code> button. </p>
<p>Feel free to submit transactions some more through the loopback applications and VSCode. Once you are done, go ahead and clean up the lab station so we can have more fun the labs coming up.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm-blockchain-wsc/ImmersionWorkshop" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>